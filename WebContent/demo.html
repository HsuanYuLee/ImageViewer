<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>View Image</title>
        <link rel="stylesheet" href="./imageviewer/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="./imageviewer/ezacquire.imageviewer.css" />
        <link rel="stylesheet" href="./imageviewer/tingle.css" />
        <script src="./imageviewer/tiff.min.js"></script>
        <script src="imageviewer/jquery-1.12.3.js"></script>
        <script src="./imageviewer/ezacquire.imageviewer.js"></script>
        <script src="./imageviewer/jquery.jscrollpane.min.js"></script>
        <script src="./imageviewer/tingle.min.js"></script>
        <script type="text/javascript">
            $(function() {
                let log = false;
                $('#login').click(function() {
                    if (!log) {
                        let T1 = performance.now()
                        $.ajax({
                            type : 'POST',
                            url : "imageServlet",
                            data : {
                                username : document.getElementById('username').value,
                                password : document.getElementById('password').value
                            },
                            success : function () {
                                console.log(`login time : ${performance.now() - T1}`);
                                $('#myDiv').imageviewer({
                                    viewerWidth: 1500,
                                    viewerHeight: 600,
                                    imageServerUrl: 'http://localhost:8083/ImageViewer/imageServlet',
                                    imageInfo : [{ docId : '20262', formId : '', currentPage : '1', viewPage : '', totalPage : '4' }],
                                    initDisplayMode : 0,
                                    waterMarkText: '中文 ImageViewer Demo',
                                    displayAfterLoad: true,
                                    showAnnotationTool: true
                                });

                                /*
                                $('#myDiv').imageviewer2({
                                    viewerWidth: 1500,
                                    viewerHeight: 600,
                                    imageServerUrl: 'http://localhost:8083/ImageViewer/imageServlet',
                                    imageInfo : [
                                        {docId : '20262', formId : '', currentPage : '1', viewPage : '', totalPage : '4'},
                                        {docId : '27895', formId : '', currentPage : '1', viewPage : '', totalPage : '4'}
                                    ],
                                    initDisplayMode : 0,
                                    waterMarkText: '中文 ImageViewer Demo',
                                    displayAfterLoad: true,
                                    showAnnotationTool: true
                                });
                                */
                            }
                        });
                        log = true;
                    }
                });
                $('#logout').click(function () {location.reload();})
            });
            //function zoomArea(x, y, width , height) { $myViewer.zoomArea(x, y, width, height); }
        </script>
    </head>

    <body>
    <div>
        Username : <input id="username" type="text"> Password : <input id="password" type="password">
        <button id="login">login</button>
        <button id="logout">logout</button>
    </div>
    <div>
        <!--
        <button onclick="zoomArea(1400, 60, 400, 160)">zoomArea(1400, 60, 400, 160)</button>&nbsp;&nbsp;
        <button onclick="zoomArea(400, 600, 600, 400)">zoomArea(400, 600, 600, 400)</button>&nbsp;&nbsp;
        <button onclick="zoomArea(1000, 1140, 430, 100)">zoomArea(1000, 1140, 430, 100)</button>&nbsp;&nbsp;
        <button onclick="zoomArea(370, 2000, 300, 1040)">zoomArea(370, 2000, 300, 1040)</button>&nbsp;&nbsp;
        <button onclick="zoomArea(1330, 2900, 1070, 330)">zoomArea(1330, 2900, 1070, 330)</button>
        -->
    </div>
    <div style="background-color:bisque;" id="myDiv"></div>
    </body>
</html>
